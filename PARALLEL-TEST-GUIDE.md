# å¹¶è¡Œæµ‹è¯•æŒ‡å— - Web Dashboard + Windows Collector

**æµ‹è¯•ç›®æ ‡**: éªŒè¯ Web Dashboard å’Œ Windows Collector çš„æ•°æ®åŒæ­¥

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³• 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åŒå‡»è¿è¡Œ
parallel-test.bat
```

é€‰æ‹©é€‰é¡¹ 3 - åŒæ—¶å¯åŠ¨ä¸¤è€…

### æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨

**ç»ˆç«¯ 1 - Web Dashboard**:
```bash
cd packages/web
npm run dev
```

**ç»ˆç«¯ 2 - Windows Collector**:
```bash
cd apps/desktop
npm run tauri:dev
```

**ç»ˆç«¯ 3 - åç«¯ API** (åº”è¯¥å·²è¿è¡Œ):
```bash
cd packages/api
npm run dev
```

---

## ğŸ“‹ æµ‹è¯•æµç¨‹

### Phase 1: åˆå§‹åŒ–é…ç½® (5 åˆ†é’Ÿ)

#### 1.1 Web Dashboard - ç™»å½•å’Œè®¾ç½®

**æ­¥éª¤**:
1. è®¿é—® `http://localhost:5173`
2. ç™»å½•:
   ```
   Email: test@lifespan.local
   Password: TestPass123!
   ```
3. è¿›å…¥ Settings é¡µé¢
4. ä¿®æ”¹ Name å­—æ®µï¼ˆæµ‹è¯•è¾“å…¥æ¡†ä¿®å¤ï¼‰
5. åˆ‡æ¢ Dark Modeï¼ˆæµ‹è¯•ä¸»é¢˜ï¼‰

**é¢„æœŸç»“æœ**:
- âœ… ç™»å½•æˆåŠŸ
- âœ… Name å¯ä»¥ç¼–è¾‘
- âœ… Dark Mode æ­£å¸¸åˆ‡æ¢
- âœ… è®¾ç½®ä¿å­˜æˆåŠŸ

#### 1.2 Windows Collector - é…ç½®æœåŠ¡å™¨

**æ­¥éª¤**:
1. Windows Collector çª—å£æ‰“å¼€
2. ç‚¹å‡» "Settings" æŒ‰é’®
3. é…ç½®:
   ```
   Server URL: http://localhost:3000
   JWT Token: <å¤åˆ¶ç™»å½•åçš„ token>
   Device ID: <è‡ªåŠ¨ç”Ÿæˆ>
   ```
4. ç‚¹å‡» "Save"

**è·å– JWT Token**:
- æ–¹æ³• A: ä»æµè§ˆå™¨ DevTools â†’ Application â†’ Local Storage
- æ–¹æ³• B: é‡æ–°ç™»å½•ï¼Œä»å“åº”ä¸­å¤åˆ¶

**é¢„æœŸç»“æœ**:
- âœ… é…ç½®ä¿å­˜æˆåŠŸ
- âœ… åŒæ­¥çŠ¶æ€æ˜¾ç¤º "æœªåŒæ­¥"
- âœ… æœåŠ¡å™¨è¿æ¥æ­£å¸¸

---

### Phase 2: æ•°æ®é‡‡é›†å’ŒåŒæ­¥ (10 åˆ†é’Ÿ)

#### 2.1 Windows Collector - é‡‡é›†æ•°æ®

**æ­¥éª¤**:
1. ç‚¹å‡» "Start Tracking"
2. åˆ‡æ¢åˆ°ä¸åŒåº”ç”¨:
   - Chrome (æµè§ˆç½‘é¡µ)
   - VSCode (ç¼–å†™ä»£ç )
   - File Explorer (æµè§ˆæ–‡ä»¶)
   - è®°äº‹æœ¬ (å†™ç‚¹å†…å®¹)
3. æŒç»­æ“ä½œ 2-3 åˆ†é’Ÿ
4. è§‚å¯Ÿé‡‡é›†ç»Ÿè®¡

**é¢„æœŸç»“æœ**:
- âœ… Status æ˜¾ç¤º "Running"
- âœ… Events count å¢åŠ 
- âœ… CPU ä½¿ç”¨ç‡ < 5%

#### 2.2 Windows Collector - åŒæ­¥æ•°æ®

**æ­¥éª¤**:
1. ç‚¹å‡» "Sync Now" æŒ‰é’®
2. è§‚å¯ŸåŒæ­¥çŠ¶æ€
3. ç­‰å¾…åŒæ­¥å®Œæˆ

**é¢„æœŸç»“æœ**:
- âœ… çŠ¶æ€: "ğŸ”„ Syncing..." â†’ "âœ… Synced"
- âœ… æ˜¾ç¤º "Last sync: just now"
- âœ… Pending events: 0

#### 2.3 Web Dashboard - æŸ¥çœ‹æ•°æ®

**æ­¥éª¤**:
1. åœ¨ Web Dashboard ä¸­å¯¼èˆªåˆ° Timeline æˆ– Analytics é¡µé¢
2. æŸ¥çœ‹é‡‡é›†çš„æ•°æ®
3. åˆ‡æ¢æ—¶é—´èŒƒå›´

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºæœ€è¿‘çš„åº”ç”¨ä½¿ç”¨è®°å½•
- âœ… æ—¶é—´çº¿å¯è§†åŒ–
- âœ… åº”ç”¨åˆ†ç±»ç»Ÿè®¡
- âœ… æ—¶é—´æ€»å’Œæ­£ç¡®

---

### Phase 3: æ•°æ®åº“éªŒè¯ (5 åˆ†é’Ÿ)

#### 3.1 æŸ¥è¯¢åŒæ­¥çš„äº‹ä»¶

```sql
-- è¿æ¥æ•°æ®åº“
psql -h localhost -U lifespan -d lifespan

-- æŸ¥çœ‹æœ€æ–°äº‹ä»¶
SELECT
    id,
    event_type,
    timestamp,
    duration,
    app_name,
    category,
    synced_at
FROM events
WHERE user_id = '<ä½ çš„ç”¨æˆ·ID>'
ORDER BY timestamp DESC
LIMIT 20;

-- æŸ¥çœ‹åŒæ­¥è®°å½•
SELECT
    sync_type,
    events_count,
    status,
    start_time,
    end_time
FROM sync_records
WHERE user_id = '<ä½ çš„ç”¨æˆ·ID>'
ORDER BY created_at DESC
LIMIT 5;

-- ç»Ÿè®¡äº‹ä»¶æ•°é‡
SELECT
    event_type,
    category,
    COUNT(*) as count,
    SUM(duration) as total_duration
FROM events
WHERE user_id = '<ä½ çš„ç”¨æˆ·ID>'
GROUP BY event_type, category
ORDER BY count DESC;
```

**é¢„æœŸç»“æœ**:
- âœ… events è¡¨æœ‰æ–°è®°å½•
- âœ… encrypted_data å­—æ®µå­˜åœ¨ï¼ˆBase64ï¼‰
- âœ… sync_records æ˜¾ç¤ºæˆåŠŸåŒæ­¥
- âœ… æ—¶é—´æˆ³æ­£ç¡®

---

### Phase 4: è·¨ç«¯åŒæ­¥æµ‹è¯• (5 åˆ†é’Ÿ)

#### 4.1 åœ¨ Windows Collector ä¸­ç»§ç»­é‡‡é›†

**æ­¥éª¤**:
1. åœ¨ Windows Collector ä¸­ç»§ç»­ä½¿ç”¨åº”ç”¨
2. é‡‡é›† 1-2 åˆ†é’Ÿæ–°æ•°æ®
3. å†æ¬¡ç‚¹å‡» "Sync Now"

#### 4.2 åœ¨ Web Dashboard ä¸­åˆ·æ–°

**æ­¥éª¤**:
1. åˆ·æ–° Web Dashboard é¡µé¢
2. æŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ•°æ®
3. éªŒè¯æ—¶é—´çº¿æ›´æ–°

**é¢„æœŸç»“æœ**:
- âœ… æ–°æ•°æ®å‡ºç°åœ¨ Web Dashboard
- âœ… æ—¶é—´çº¿å®æ—¶æ›´æ–°
- âœ… æ•°æ®ä¸€è‡´æ€§

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•æ¸…å•

### Web Dashboard

#### è®¤è¯å’Œç”¨æˆ·ç®¡ç†
- [ ] ç™»å½•æˆåŠŸ
- [ ] é€€å‡ºç™»å½•
- [ ] Token è‡ªåŠ¨åˆ·æ–°
- [ ] ä¿®æ”¹ç”¨æˆ·å

#### UI åŠŸèƒ½
- [ ] Dark Mode åˆ‡æ¢
- [ ] å“åº”å¼å¸ƒå±€
- [ ] å¯¼èˆªèœå•
- [ ] è®¾ç½®é¡µé¢

#### æ•°æ®å±•ç¤º
- [ ] æ—¶é—´çº¿æ˜¾ç¤º
- [ ] åº”ç”¨ç»Ÿè®¡
- [ ] åˆ†ç±»å›¾è¡¨
- [ ] æ—¶é—´èŒƒå›´è¿‡æ»¤

### Windows Collector

#### é…ç½®
- [ ] æœåŠ¡å™¨é…ç½®ä¿å­˜
- [ ] JWT Token é…ç½®
- [ ] Device ID ç”Ÿæˆ
- [ ] é…ç½®æŒä¹…åŒ–

#### æ•°æ®é‡‡é›†
- [ ] å¯åŠ¨/åœæ­¢é‡‡é›†
- [ ] çª—å£è¿½è¸ª
- [ ] ç©ºé—²æ£€æµ‹
- [ ] äº‹ä»¶ç»Ÿè®¡

#### æ•°æ®åŒæ­¥
- [ ] æ‰‹åŠ¨åŒæ­¥
- [ ] åŒæ­¥çŠ¶æ€æ˜¾ç¤º
- [ ] é”™è¯¯å¤„ç†
- [ ] é‡è¯•æœºåˆ¶

#### æ€§èƒ½
- [ ] CPU ä½¿ç”¨ç‡ < 5%
- [ ] å†…å­˜ä½¿ç”¨ç¨³å®š
- [ ] åŒæ­¥é€Ÿåº¦ < 2s (100 events)
- [ ] ä¸é˜»å¡ç”¨æˆ·æ“ä½œ

---

## ğŸ› å·²çŸ¥é—®é¢˜

### Web Dashboard
- ~~Settings é¡µé¢ Name è¾“å…¥æ¡†åªè¯»~~ âœ… å·²ä¿®å¤
- React Router v7 è­¦å‘Šï¼ˆå¯å¿½ç•¥ï¼‰

### Windows Collector
- è‡ªåŠ¨åŒæ­¥è°ƒåº¦å™¨æœªå®ç°ï¼ˆéœ€æ‰‹åŠ¨åŒæ­¥ï¼‰
- 100+ äº‹ä»¶è‡ªåŠ¨è§¦å‘æœªå®ç°ï¼ˆéœ€æ‰‹åŠ¨åŒæ­¥ï¼‰

---

## ğŸ“Š æ€§èƒ½åŸºå‡†

### Windows Collector
- CPU: < 5%
- å†…å­˜: < 50MB
- åŒæ­¥ 100 äº‹ä»¶: < 2s
- é‡‡é›†å»¶è¿Ÿ: < 100ms

### Web Dashboard
- é¡µé¢åŠ è½½: < 1s
- æ•°æ®åˆ·æ–°: < 500ms
- å›¾è¡¨æ¸²æŸ“: < 1s

### åç«¯ API
- Sync API: < 200ms (P95)
- æ•°æ®åº“æŸ¥è¯¢: < 100ms
- JWT éªŒè¯: < 1ms

---

## âœ… æµ‹è¯•å®Œæˆæ ‡å‡†

### æœ€å°å¯ç”¨äº§å“ (MVP)
- [x] ç”¨æˆ·å¯ä»¥ç™»å½• Web Dashboard
- [x] Windows Collector å¯ä»¥é‡‡é›†æ•°æ®
- [x] æ•°æ®å¯ä»¥åŒæ­¥åˆ°æœåŠ¡å™¨
- [x] Web Dashboard å¯ä»¥æŸ¥çœ‹æ•°æ®
- [x] é”™è¯¯æœ‰æ¸…æ™°çš„æç¤º

### Alpha ç‰ˆæœ¬
- [ ] æ‰€æœ‰ MVP æ ‡å‡†è¾¾æˆ
- [ ] è‡³å°‘å®Œæˆä¸€æ¬¡å®Œæ•´çš„ç«¯åˆ°ç«¯åŒæ­¥
- [ ] æ•°æ®åº“ä¸­æœ‰åŠ å¯†çš„äº‹ä»¶æ•°æ®
- [ ] æ€§èƒ½æŒ‡æ ‡ç¬¦åˆåŸºå‡†

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ—¥å¿—

**Web Dashboard**:
- æµè§ˆå™¨ DevTools (F12)
- Console æ ‡ç­¾é¡µ
- Network æ ‡ç­¾é¡µï¼ˆæŸ¥çœ‹ API è¯·æ±‚ï¼‰

**Windows Collector**:
- Tauri çª—å£ â†’ DevTools (Ctrl+Shift+I)
- Console æ ‡ç­¾é¡µ
- åç«¯æ—¥å¿—ï¼ˆè¿è¡Œ npm run dev çš„ç»ˆç«¯ï¼‰

**åç«¯ API**:
- ç»ˆç«¯è¾“å‡º
- æ—¥å¿—çº§åˆ«: info/warn/error

### å¸¸è§é—®é¢˜

**é—®é¢˜ 1: åŒæ­¥å¤±è´¥ "Auth failed"**
- æ£€æŸ¥ JWT Token æ˜¯å¦æ­£ç¡®
- Token è¿‡æœŸï¼Ÿé‡æ–°ç™»å½•è·å–æ–° Token
- æ£€æŸ¥è®¾å¤‡ ID æ˜¯å¦åŒ¹é…

**é—®é¢˜ 2: Web Dashboard æ— æ•°æ®**
- åˆ·æ–°é¡µé¢
- æ£€æŸ¥åç«¯ API æ˜¯å¦æ­£å¸¸
- æŸ¥è¯¢æ•°æ®åº“éªŒè¯æ•°æ®

**é—®é¢˜ 3: Windows Collector æ— å“åº”**
- é‡å¯åº”ç”¨
- æ£€æŸ¥åç«¯æœåŠ¡å™¨
- æŸ¥çœ‹ Tauri DevTools æ—¥å¿—

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

æµ‹è¯•å®Œæˆåï¼Œè¯·æä¾›ï¼š

### åŸºæœ¬ä¿¡æ¯
- æµ‹è¯•æ—¥æœŸ:
- æµ‹è¯•ç¯å¢ƒ:
- æµ‹è¯•äººå‘˜:

### æµ‹è¯•ç»“æœ
- é€šè¿‡çš„æµ‹è¯•:
- å¤±è´¥çš„æµ‹è¯•:
- å‘ç°çš„é—®é¢˜:

### æ€§èƒ½æ•°æ®
- Windows Collector CPU:
- Windows Collector å†…å­˜:
- åŒæ­¥è€—æ—¶:
- Web Dashboard åŠ è½½æ—¶é—´:

### åé¦ˆ
- åŠŸèƒ½å»ºè®®:
- UI æ”¹è¿›:
- Bug æè¿°:

---

**å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹æµ‹è¯•ï¼** ğŸš€
